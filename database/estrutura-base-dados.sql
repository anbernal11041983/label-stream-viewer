DROP FUNCTION IF EXISTS "bill_warrant";;
CREATE FUNCTION "bill_warrant" (IN "billid" character varying) RETURNS float8 LANGUAGE plpgsql AS '
DECLARE
    warr DOUBLE PRECISION := 0.0;
BEGIN
    SELECT balance_warrant INTO warr FROM issued_bills WHERE bill_id = billid;
    RETURN warr;
END;
';

DROP FUNCTION IF EXISTS "cp_year_start_balance";;
CREATE FUNCTION "cp_year_start_balance" (IN "custid" character varying, IN "yearnum" integer) RETURNS float8 LANGUAGE plpgsql AS '
DECLARE
    balam DOUBLE PRECISION := 0.0;
BEGIN
    SELECT balance_amount INTO balam
    FROM annual_process_values
    WHERE year_number = yearnum AND customer_id = custid;
    RETURN balam;
END;
';

DROP FUNCTION IF EXISTS "firstbilldate";;
CREATE FUNCTION "firstbilldate" (IN "cus_id" character varying, IN "byear" integer) RETURNS date LANGUAGE plpgsql AS '
DECLARE
    fbpd DATE;
BEGIN
    SELECT DATE(time) INTO fbpd
    FROM bill_balance_log
    INNER JOIN issued_bills ON issued_bills.bill_id = bill_balance_log.bill_id
    WHERE bill_balance_log.customer_id = cus_id AND issued_bills.bill_year = byear
    ORDER BY bill_balance_log.time ASC LIMIT 1;
    RETURN fbpd;
END;
';

DROP FUNCTION IF EXISTS "hasbillformonth";;
CREATE FUNCTION "hasbillformonth" (IN "cus_id" integer, IN "bill_year" integer, IN "bill_month" integer) RETURNS bool LANGUAGE plpgsql AS '
DECLARE
    billcount INTEGER;
BEGIN
    SELECT COUNT(*) INTO billcount
    FROM issued_bills
    WHERE customer_id = cus_id AND bill_year = bill_year AND bill_month = bill_month;
    RETURN billcount > 0;
END;
';

DROP FUNCTION IF EXISTS "property_value";;
CREATE FUNCTION "property_value" (IN "in_prop_type" integer, IN "in_prop_id" integer) RETURNS varchar LANGUAGE plpgsql AS '
DECLARE
    l_prop_val VARCHAR := '''';
BEGIN
    SELECT prop_value INTO l_prop_val
    FROM properties
    WHERE prop_type = in_prop_type AND prop_id = in_prop_id;
    RETURN l_prop_val;
END;
';

DROP VIEW IF EXISTS "dash_impressao_agg";
CREATE TABLE "dash_impressao_agg" ("total_templates" bigint, "total_labels" bigint, "total_jobs" bigint, "total_dia" bigint, "total_mes" bigint, "total_ano" bigint);


DROP TABLE IF EXISTS "dispositivo";
DROP SEQUENCE IF EXISTS dispositivo_id_seq;
CREATE SEQUENCE dispositivo_id_seq INCREMENT 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1;

CREATE TABLE "public"."dispositivo" (
    "id" integer DEFAULT nextval('dispositivo_id_seq') NOT NULL,
    "mac_address" character varying(50) NOT NULL,
    "status" character varying(20) DEFAULT 'BLOQUEADO' NOT NULL,
    "criado_em" timestamp DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "dispositivo_pkey" PRIMARY KEY ("id")
)
WITH (oids = false);

CREATE UNIQUE INDEX dispositivo_mac_address_key ON public.dispositivo USING btree (mac_address);

INSERT INTO "dispositivo" ("id", "mac_address", "status", "criado_em") VALUES
(2,	'00:15:5D:55:4F:19',	'ATIVADO',	'2025-06-24 08:58:39.287598');

DROP TABLE IF EXISTS "historico_impressao";
DROP SEQUENCE IF EXISTS historico_impressao_id_seq;
CREATE SEQUENCE historico_impressao_id_seq INCREMENT 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1;

CREATE TABLE "public"."historico_impressao" (
    "id" integer DEFAULT nextval('historico_impressao_id_seq') NOT NULL,
    "modelo" character varying(100) NOT NULL,
    "sku" character varying(100) NOT NULL,
    "quantidade" integer NOT NULL,
    "data_hora" timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
    "impressora" character varying(100) NOT NULL,
    CONSTRAINT "historico_impressao_pkey" PRIMARY KEY ("id")
)
WITH (oids = false);

INSERT INTO "historico_impressao" ("id", "modelo", "sku", "quantidade", "data_hora", "impressora") VALUES
(66,	'template modelo',	'SKU-0001',	35,	'2025-06-23 20:01:43.661021',	'ZDesigner GK420d'),
(67,	'template modelo',	'SKU-0003',	866,	'2025-06-23 20:04:31.794484',	'Zebra ZT411'),
(68,	'template modelo',	'SKU-0001',	35,	'2025-06-24 07:56:44.501153',	'Zebra ZT411'),
(69,	'template modelo',	'SKU-0001',	25,	'2025-06-24 08:14:37.535902',	'Zebra ZT411'),
(70,	'template modelo',	'SKU-0001',	5,	'2025-06-24 10:09:54.823479',	'Zebra ZT411'),
(71,	'template modelo',	'SKU-0001',	800,	'2025-06-24 10:21:31.716186',	'Zebra ZT411'),
(72,	'template modelo',	'SKU-0001',	35,	'2025-06-24 10:22:19.037631',	'Zebra ZT411');

DROP TABLE IF EXISTS "template_zpl";
DROP SEQUENCE IF EXISTS template_zpl_id_seq;
CREATE SEQUENCE template_zpl_id_seq INCREMENT 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1;

CREATE TABLE "public"."template_zpl" (
    "id" integer DEFAULT nextval('template_zpl_id_seq') NOT NULL,
    "nome" character varying(100) NOT NULL,
    "tipo_arquivo" character varying(50) NOT NULL,
    "conteudo" text NOT NULL,
    "criado_em" timestamp DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "template_zpl_pkey" PRIMARY KEY ("id")
)
WITH (oids = false);

INSERT INTO "template_zpl" ("id", "nome", "tipo_arquivo", "conteudo", "criado_em") VALUES
(7,	'2048',	'TXT',	'~DGSELOMI,16560,048,hI0F8jT0FCjT0FCO01jI01FEO03EjH01FEO03EiU03HF8I01HF
O07FiT03IFEI03EFO0HFiT0KFI03CF8N0HFiT0IF7F8H03C78M01HFiT0FCH0FCH07C7CM03
EF8I03FCiM078H07CH07C3CM03C78I0IFiM078H03EH0783EM07C78H01IFCiL07CH03EH0F
81EM0F878H03IFEiL07CH01EH0F81FM0F878H07F03FiL03CH01FH0FH0FL01F07CH0FCH0F
8iK03CI0F01FH0F8K01E03CH0F8H078iK03EI0F01JF8K03E03C01FI07CiK03EI0F01JFCK
07E03C01FI07C038iH01EI0F03JFCK07HF3E03EI07C03EhT07EL01EI0F03HFC3EK0JFE03
EJ0807F8hR03HF8K01FI0F03CH03EJ01JFE03CL07FEhR07HFCK01FI0F07CH01FJ01F1HFE
03C03J0IFhQ01JFK01FH01F07CH01FJ03EH07E03C03EI0FBFChP03F83FL0FH01E078I0FJ
07EH01F07C03FC01F0FEhP03EH0F8K0F803E0F8I0F8I07CH01F07C07HF01F03FhP07CH07
CK0F807C0F8I0CJ0F8I0F03CH0HF03EH0F8hO078H07CK0F83FC0F8N038I0F03CH01E03EH
0F8hO0F8H03EK07BHF8V0F83CH03E07CH078hO0FI01EK07HFEW0F83EH03E07CH078hO0FI
01FK07HF8W0F81FH03C0HFH0780ChJ03H0FJ0FK07F8K07MF8L01F807C0HFC0F80FhJ0FH0
FJ0FK078J07QF8K0FE07C1KF01FhJ0F80F8I0F8N01TFCJ07FE781F3IF03EhJ07C078I0F8
M03VFEI01IF83E0HFE03EhJ07C078I0F8L03YFI0IF83E03F807ChJ03E07CI0F8K03gFEH0
1HF07C01EH0FChJ01E03CI0F8J01gHFEH01F07C01FH0F8hJ01F03EI0F8J0OF8K07NFCJ0F
801F01FhI06H0F81FH01FJ07MFP03MF8I0F801F01FhH03F80F81FH01EI03LF8S0MFH01FH
01E03EH07FgX0HFC07C0FC03EH01LFV07KFCH0FH01E07C01HFCgV01HFE03E07F1FCH07KF
X03KF802H03E07C07HFEgV07IF03E03IF801KFg07JFEJ03E0F80JFgV0FC1F01F01IFH0KF
8gG07JF8I03C0F81FC1F8gT01F80F01FH0HFE03JFCgI0KFI07C1F03FH07CgT03FH0FH0F8
H0EH0JFEgJ01JFCH07C3E07EH03EgT0FCH0FH07CJ03JFQ01CS03JFH07C3E07CH01EgS01F
8H0FH07CJ0JF8O03HFET0JFC0187C0F8I0FgT07C01FE03EI03IFEP03HFET01JFI0F80F8I
0FgT07E03HF01FI0JF8P03HFEU07IF8H0F81FJ0FgP01I03F07HF81FH01IFCQ07IFU01IFE
01F01EI01FgP03I01F0IFC0F807IFR07IFV07IF80F01EJ0EgP0702H0F9F87E0F01IFCR07
IF8V0IFC0203EJ06gP0F07H0HFE03F8403IFS0JF8V03IFI03EL01gN0F0F807FC01FCH0IF
CS0JFCN01HFCJ01IFCH03EL038gM0F1FH03F8H0FE03IFT0JFCN07IF8J07HFEH03EL07EgM
073EH01FI03C07HFET0HF7FEN0JFEJ01IF801EL0FCgM067CI0F8H0101IF8S01HF3FEM03K
FK07HFC01EK01F8gM06F8I0FCJ03HFET01HF3HFM03KFCJ01IF01FK03FgN01FJ07EJ07HF8
J01FCM01HF3HFM07KFEK0IF80F8J07EgN03EH0403EI01IFK0IFM03FE1HFM0MFK03HFC07C
18H0FCgN07CH0E01FI03HFCJ03IF8L03FE1HF8L0IF9IFK01IF03HFE01F8gN0F801FH0F8H
07HF8J0JFCL03FE0HF8K01HFC03HF8K07HF81IF03FgN01F803EH0FC01HFEJ03JFEL07FE0
HFCK01HF801HFCK03HFC0HFC07EgO0FC03CH07E03HFCJ0LFL07FC07FCK01HF8H0HFCL0IF
03F80FCgO07E07CH03C07HFJ03LFL07FC07FEK01HF8H07FCL07HF8I01FJ03gK03F0F8H01
80HFEJ0MF8K07FC07FEK01HF8H07FEL01HFCI03EJ078gJ01F9FH02H03HFCI01MF8K0HFC0
3HFK01HF8H07FEM0HFEI07EJ0FCgH01H0HFEH03H07HFJ07IF83HF8K0HF803HFK01HFCH07
FEM07HFI07CI01F8gH03807FCH0780HFEI01IFCH0HF8K0HF801HF8J01HFEH0HFCM01HFCH
078I03FgI03C03F8H0F81HFCI03IF8H0HF8J01HF801HF8K0IFH01FCN0HFEH078I07EgI07
C01F801F03HF8I03HFEI07F8J01HFH01HF8K07HFCH07CN07HFH078I0FCgI0F8H0FC03E07
FEJ01HFCI07F8J01HFI0HFCK07HFEI08N03HF8078H01F8gH01FI07E07C0HFCJ01HFCI07F
K01MFCK03IFO08H01HFC078H03FgI01EI03F0F81HF8K0HFEI0HFK03MFEK01IFCN0CI07FE
078H07EH02g03EI01F9F03HFL0HFEI0FEK03MFEL0IFEM01EI03HF03CH0FCH07g07CJ0HFE
07FEL07HFH01FCK03NFL03IFM03F8H01HF83E01F8H0Fg0FCJ07FC0HFCL07HFH03HFEJ07N
FI0EH01IF8L07FCI0HFC1F0HFH03F8Y0FEJ03F81HF8L03HF807IFJ07NF8H0FCH0IFCL0HF
EI07FE0IFEH07FY01HFK0F03HFM03HF81JF8I07NF8H0HFC07HFEL0IFI03HF07HFCH0FEY0
3HFCJ0607FEM01HFC7JFCI0JFC01HF8H0HFC01IFK01HFEI01HF83HFH03FCY03CFEJ040HF
CM01HFDKFEI0HFCJ0HFCH0HF8H0IFK03HFCJ0HFC0FEH07Fg07C7F8J01HF8N0OFI0HFCJ0H
FC01HF8H07HF8J07HF8J07FEK0FEg0F81FCJ03HFO07NFI0HF8J0HFE01HF8H03HF8J0IFK0
3HFJ03F8Y01FH0FEJ07FEO07JFC7HF801HF8J07FEH0HF8H01HF8I01IFK01HFJ07Fg01EH0
7F8I0HFCO03IFE03HFC01HF8J07HFH0HFCH01HF8I01HFEL0HF8H01FEgG0EH01FCH01HF8O
03IFC01HFE01HF8J03HFH0HFCH01HF8I03HFCL07FCH03F8gG04I0FEH01HFP01IFI0IF03H
FK03HF80HFEH01HF8I07HF8L03FEH07FgL03F803FEI01F8J01HFCI07HF03HFK038I07HFH
03HF8I0IFM01HF01FEgL01FC07FCI07FEK0HFEI07HF83HFP03HFC07HF8H01HFEJ02H01HF
83F8gM0FE0HF8H01IFK0HFEI03HFC3F8P03MFI03HFEJ07I0HF83FgN03C1HF8H03IF8J07H
FI01IFS01MFI03HFCJ0F8H07FC1FL0EU07K01C1HFI07IFCJ07HFJ0HFET0LFEI07HF8I03F
8H03FE0FK01ET01FCK083FEI0JFEJ03HF8I0HF8T03KFCI0IFJ07FCH01HF0F8K0FT03FCL0
7FCH01JFEJ03HF8I07EU01KF8H01HFEJ0HFEI0HF07CK0FT07F8L0HF8H03KFJ01HFCI038V
07JFI03HFCI01IFI0HF83CK078S0HF8L0HF8H07KFJ01HFCI02W01IFCI07HFCI03IF8H07F
C1EK078R01FH01EI01HFI0LFK0HFEgH01HFJ07HF8I07HFEI03FE1FK03CR01EH07F8H03FE
H01HFC1HFK07FEgO0IFJ0IFCI01FE0F8J03CR03CH0HFCH03FCH03HFH0HFK07HFgN01HFEI
03IF8I01HF078J01ER03C01HFEH07FCH07FEH0FE0EI03HF8gM03HFCI07IFK0HF87CJ03FR
03C03IFH0HF8H0HFCH0FE7FCH03HF8gM07HF8I0IFCK07F838J0HFR03C07E1FH0HFH01HF8
H0JFEH01HFCgM0IF8H01IF8K07FC1J03HF8Q0780FC0F01HFH03HFI0KF801HFCgM0IFI03I
FL03FEK0IF8Q07C1F80F03FEH07HFI0KFCH0HFgM01HFEI07HFEL01FEJ03FE3CQ07C3FH0F
03FCH0IF801KFCH0FCgM03HFCH01IFCL01HFJ0HF83CQ03HFEH0F07FCH0IFC03KFEH07gN0
7HF8H03IF8M0HFI03HF01EQ03HFCH0F07F8H07HFE07LFH06gN01HFI07IFN07F8H0HFC01E
Q01HF8H0F0HFI03IF07HF0IFgR0HFI0IFCN07FC01HFI0FR0HFH01E1HFI01IF8HFC07HFgR
07EH01IF8N03FC07FCI0FR03EH03E1FEJ0IFDHF803HFgR01CH03IFO01FE1HFJ04V07C3FC
J07KFH01HFgS08H07HFEO01FE0FCU04J0HF83FCJ03JFEH01HFgU01IFCP0HF0FV0FJ0HF87
F8J01JFCH01HFgU03IF8P0HF04V0FEH01HF07F8K07IF8H01FEgU07HFEQ07F8V01HF801FC
0HFL03IFI03FEgU0IFCQ07FCM06O07FEH02H0HFL01IFI03FEgT01IF8Q03FCL03EO01HF8I
01FEM0IFCH07FCgT03IFR03FEK01HFP07FEI01FEM07HFEH0HFCgU0HFER01FEK0IFP01HF8
H03FCM03IFH0HF8gU0HFCR01HFJ03HFEQ07FEH03FCM01IF81HFgV07FES0HFI01IFS0HFC0
7F8N0IFC3FEgV03HFS0HFI07HF8S03HF07F8N07HFE7FEgV01HF8R07F801HFCP08J0HF0HF
O03KFCgW0HFCR07F801FEP01F8I03F0HFO01KF8gW07FCR03FC03F8P01HFJ0E1FEP0KFgX0
3FER03FC07EQ01IFI021FEP07IFEgX03HFR01FE07CQ01IFEI03FCP01IFCgX01HF8Q01FE0
78R03IFEH03FCQ0IF8gY0HFCR0HF0F8S03IFC03F8Q07HFh07FER0HF0FU07IF87F8Q03FEh
03HFR07F0FV07HF07F8Q01FCh01HFR07F878J03Q0HF0HFS0F8hG0HF8Q07F878I01F8O01H
F0HFS07hH07FR03F878I0HF8N01IF0FES02hH07ER03FC3CH07HF8M01IFE1FEhV03CR01FC
3E03HFEM03IFE01FEhV018R01FE1KFM03IFEH01FCiP01FE1JF8L01IFEI03FCiQ0FE07HFE
M01HFEJ03FCiQ0HF03HFN01FEK03F8iQ0HFH06O03FEK07F8iQ07FR03HFEJ07F8iQ07FM01
J03IFCI07FiR07F8K07FK03IFCH07FiR03F8J0IFL07IF80HFiR03F8H01JFM07IF0HFiR03
FC03KFN0IF0FEiR03FC3JFE78N0HF1FEiR01FC3IFC078N01E1FEiR01FC3IFC078I0FCJ02
1FCiR01FE1F83C078I0HFEJ01FCiR01FE1H03C038I0JFI03FCiS0FEI03C03CI0KF803FCi
S0FEI01E03CI01KFC3F8iS0HFI01E03CK0JFC3F8iS0HFI01E03CL07HFC3F8iS07FI01E07
CM03FC7F8iS07FI01F07CO087F8iS07FI03IF8P07FiT07F8H0JF8P07FiT07F807FDHFI03
F8K07FiT03F81HF8FCI03JFI07FiT03F87HFL03LF0HFiT03F87FCL03LF0HFiT03F87EM03
LF0FEiT03FC3N03F81IF0FEiT03FC2N03FEI010FEiT03FC3O0HFCJ0FEiT01FC3EN03HFJ0
FEI03E0FCH07CH0HF801HFEH07IF8H0HFCH0FI0HFCH07EH03EI078H01HFEK0HFCJ01FC3F
CN07FCH01FEI03E0FCH07C03HFE01IF807IF803IFH0FH03HFEH07EH03EI0FCH01IFEI03H
FEJ01FC3HFN01HFH01FEI03E0FEH07C07IF01IFE07IF807IF80FH07IFH07FH03EI0FCH01
JFI07IFJ01FC3HFEN07FC01FEI03E0HFH07C0JF81JF07IF80JFC0FH0JFC07FH03EH01FCH
01JFCH0JF8I01FC07HFCM01HF81FCI03E0HFH07C1F80F81E01F878J0F807C0F01F80FC07
F803EH01FEH01F01FC01F80FCI01FCH0IFN07FE1FCI03E0HF807C1EH07C1EH0F878I01FH
03E0F01FH03E07FC03EH03FEH01FH07E01FH03EI01FEH07HFEN0FE1FCI03E0HF807C1EH0
7C1EH07878I03EH03E0F03EH03E07FC03EH03DFH01FH01F03EH01EI01FEH07IFCM07E1FC
I03E0HFC07C1EH07C1EH07C78I03EH03E0F03EH01F07FE03EH03CFH01FH01F03EH01FI01
FEH078IF8K07FE1FCI03E0FBC07C1EJ01EH07878I03CK0F07CH01F07DE03EH07CFH01FI0
F03CH01FI01FEH0781HF8J03HFE1FCI03E0FBE07C1FJ01EH07878I03CK0F07CI0F07DF03
EH078F801FI0F87CI0FJ0FEH07803F8I03IF81FCI03E0F9F07C1HFI01EH0F878I07CK0F0
7CI0F07CF83EH0F87801FI0F87CI0F8I0FEH07801F8H03IFC01FCI03E0F8F07C0IFH01E0
1F87IF87CK0F078I0F07C783EH0F07C01FI0F87CI0F8I0FEH0780HF801IFCH01FCI03E0F
8F87C07HFE01JF07IF87CK0F078I0F87C7C3EH0F03C01FI07878I0F8I0FEH0783HFH07HF
CI01FCI03E0F8787C03IF01IFE07IF87CK0F078I0F87C3C3E01F03E01FI07878I0F8I0FE
H078HFCH0HFEJ01FCI03E0F87C7CH07HF81IF807IF87CK0F078I0F07C3E3E01E03E01FI0
7878I0F8I0FEH07BFEI0FEK01FCI03E0F83E7CI07FC1HFEH078I07CK0F07CI0F07C1F3E0
3E01E01FI0F87CI0FJ0FEH03HF8I0JFI01FCI03E0F81E7CJ07C1EJ078I07CK0F07CI0F07
C1F3E03JF01FI0F87CI0FJ0FEH07FEJ0LFC1FCI03E0F81F7CJ03C1EJ078I03CK0F07CI0F
07C0FBE03JF01FI0F87CI0FJ0FE03HF8J0LFC1FCI03E0F80F7C3EH03E1EJ078I03CK0F03
CH01F07C07BE07JF81FI0F03CH01FJ0FE0HFEK0LFC1FCI03E0F80HFC1EH03C1EJ078I03E
H03E0F03EH01F07C07FE07JF81FH01F03EH01FJ0FE1HFN01IFC1FCI03E0F807FC1EH03C1
EJ078I01EH03E0F03EH03E07C03FE0F8H0781FH01F01EH03EJ0FE1FCQ03C1FCI03E0F807
FC1FH07C1EJ078I01FH07C0F01FH07C07C03FE0F8H07C1FH07E01FH07CJ0FE1FT01FCI03
E0F803FC1F80F81EJ078J0FC0FC0F01F80FC07C01FE0FI07C1F07FCH0F80FCJ0FE1CT01F
CI03E0F801FC0JF81EJ07IF80JF80FH0JF807CH0FE1FI03E1JF8H0JF8J0FEV01FCI03E0F
801FC07IF01EJ07IF803IFH0FH03IFH07CH0FE1EI03E1JFI03IFK0FEV01FCI03E0F8H0FC
01HFC01EJ07IF801HFEH0FH01HFCH07CH07E3EI01E1IFEI01HFCK0FEV01FCI03E0F8H0FC
H0HF801EJ07IF8H03F8H0FI03EI07CH07E3EI01F1HFCK03EL0FEV01FCiU0FEV01FCiT01F
EV01FCiT01FEV01FCiT01FEV01FCiT01FEV01FCiT01FCV01FEiT01FCV01FEiT01FCV01FE
iT01FCW0FEiT01FCW0FEiT01FCW0FEiT03FCW0FEiT03FCW0FEiT03FCW0HFiT03F8W0HFiT
03F8W07FiT03F8W07FiT03F8W07FiT07F8W07FiT07F8W07F8iS07FX07F8iS07FX03F8iS0
7FX03F8iS0HFX03F8iS0HFX03FCiS0FEX03FCiS0FEX01FCiR01FEX01FCiR01FEX01FEiR0
1FCX01FEiR01FCY0FEiR03FCY0HFiR03FCY0HFiR03F8Y07FiR03F8Y07FiR07F8Y07F8iQ0
7Fg07F8iQ07Fg03F8iQ0HFg03FCiQ0HFg03FCiQ0FEg01FCiP01FEg01FEiP01FEg01FEiP0
1FCgG0FEiP03FCgG0HFiP03F8gG0HFiP07F8gG07F8iO07F8gG07F8iO07FgH03F8iO0HFgH
03FCiO0HFgH03FCiN01FEgH01FEiN01FEgH01FEiN03FCgI0HFiN03FCgI0HFiN07F8gI07F
8iM07F8gI07F8iM07FgJ03FCiM0HFgJ03FCiM0HFgJ01FEiL01FEgJ01FEiL03FEgK0HFiL0
3FCgK0HFiL07FCgK07F8iK07F8gK07F8iK0HFgL03FCiK0HFgL03FCiJ01FEgL01FEiJ01FE
gL01HFiJ03FCgM0HFiJ07FCgM07F8iI07F8gM07FCiI0HF8gM03FCiH01HFgN03FEiH01FEg
N01HFiH03FEgO0HFiH07FCgO0HF8iG07F8gO07FCiG0HF8gO03FCi01HFgP03FEi01FEgP01
HFX078h03FEgQ0HF8V03HFCgY07FCgQ0HF8V0JFgY0HF8gQ07FCU01JFCW018Y0HFgR03FEU
03KFW0F8X01HFgR01HFU07KF8U07F8X03FEgR01HFU0LFCT07HFCX07FCgS0HF8T0LFES03I
FCX0HF8gS07FCS01HFE1IFR01JFCW01HF8gS03FES01HF807HFR0KFEW01HFgT01HFS03HF8
01HF8I03HFJ0LF8W03FEgT01HF8R03HFH01HF8I03HFI03KFCX07FCgU0HFCR03HFI0HFCI0
3HFI03JFEY0HF8gU07FER03HFI0HFCI03HFI01JFY01HFgV03HFR03HF8H0HFCI03FEI01IF
8Y03HFgV01HF8Q01HFCH0HFCI03FEI01HF8g07FEgW0HFCQ01HFEH0HFCI03FEJ0HFCg0HFC
gW07FER0IFH07F8I03FEJ0HFCY01HF8gW03HFR0IF8H0F8I03FEJ0HFCY03HFgX01HF8Q07H
FCH018I03FEJ0HFCY07FEgY0HFCQ03HFEM03FEJ07FEI038T0HFCgY07FEQ01IF8L03FEJ07
FEH01F8S01HF8gY03HFR0IFCL03FEJ07FEH0HF8S03HFh01HF8N0CH07HFEL03FEJ03HF07H
FCS07FEhG0HFCM01F803IFL03FEJ03HF3IFCS0HFChG07FEM01FE01IF8K07FEJ03LFCR03H
F8hG03HFM01HF807HFCK07FEJ01LFER07HFhH01HFCL03HFH03HFCK07FEJ01LF8R0HFEhI0
HFEL03HFH01HFEK07FEJ01KFCR01HFChI07HFL03HFI0IFK07FEJ01JFEK018L07HF8hI03H
FCK03HFI07HFK07FEK0IFEL07CL0HFEhJ01HFEK03HFI03HFK07FEK0IFL01FCK01HFChK07
HFK03HFI03HFK07FEK0HFCL07FEK07HF8hK03HFCJ01HF8H03HFK07FEK07FEL07FEK0IFhL
01HFEJ01HFCH03HFK07FEK07FEL03HFJ01HFEhM0IF8J0IFH07FEK07FEK07FEL01HFJ07HF
8hM03HFCJ07HFC1HFEK07FEK03HFL01HF8I0IFhN01IFJ03LFEK07FEK03HFM0FCI03HFEhO
0IF8I01LFCK07FEK03HFM0F8I0IF8hO03HFEJ0LFCK07FEK01HF8L06I01IFhP01IF8I07KF
8K07FEK01HF8P07HFChQ07HFCI01KFL07FEK01HF8O01IF8hQ03IFJ07IFCH07EH07FEK01H
F8O03HFEhS0IFCI01IF8H07FC07FEL0HFCO0IFChS07IFJ01FCI07FC07FCH07FH0HFCN03I
FhT01IFCO07FC07FCH0HF80HFCN0IFEhU07IFO0HF807FCH0HF807FEM03IF8hU03IFCN0HF
807FCH0HF807FEM0IFEhW0JFN0HF807FCH0HF807FEL07IFChW03IFEM0HF807FCH0HF803F
EK01JFhY0JF8L07F807FCH0HF803FL07IFChY03JFM01807FCH0HF8038K03JFiG0JFCO07F
CH0HF8M01JFCiG03JF8gI0KFiI0KFgH07JFCiI03KFg03JFEiK07JFEX03KF8iK01LFV03KF
EiM03LFT07LFiO0MFCP01MF8iO01NFCL01NFCiQ03gHFEiS03gGFiU07YFiW03WFiY03TFEj
H0RFCjJ01NFEhJ0
~DGLG20137,05400,040,oM01CU01F8i03EU07FEhJ018T0FEU0IFhG0MFEP03FCT01IF8gY0QF
8L01HFCT03IFCgX07TF8H01IF8T07IFCgX0gHFU0JFEgW03gHFU0JFEgW07gGFET01JFEgW0
gHFCT01KFgV01gHF8T03KFgV03gHFU07KFgV07gGFCU07KFgV0gHF8U07HFDHF8gT01gGFEV
0IF8HF8gT01gGF8V0IF0HF8gT03gFCW0IF0HF8gT03YFCW01HFE0HF8gT07KFCJ03MFCX01H
FE07F8gT07JFCN0HFCgG03HFE07FCgT07IFEN01HF8gG03HFC07FCgT0JFCN03HFgH03HFC0
7FCgT0JFO07FEgH03HFC07FCgT0IFEO0HFEgH07HFC07FCgT0IFEN01HFCgH07HF807FCgT0
IFCN01HFCgH07HF807FCgT0IFCN03HF8V04K07HF807FCgG08R0IFCN03HF8U03F8J0IF807
FCg07F8Q0IFCN07HFV07FEJ0IF807FCg07FEQ0IF8N0IFV0IFJ0IF807FCY01HFEQ0IF8N0I
FU01IFJ0IFH07FCY01IFQ0IF8M01HFEU01IF8H01IFH07FCY03IF8P0IF8M03HFEU03IF8H0
1IFH07FCY03IF8P0IFCM03HFEU03IFCH01IFH07FCY03IF8P0IFCM03HFEU03IFCH01IFH07
FCY03IF8P07HFCM07HFEU03IFCH01IFH07FCY07IF8P07HFCM07HFCU03IFCH01IFH07FCY0
3IF8P07HFEM07HFCU03IFCH03IFH07FCY03IF8P03HFEM0IFCU01IF8H03HFEH07FCY03IF8
P03IFM0IFCU01IF8H03HFEH07FCY01IFQ01IF8L0IFCV0IFI03HFEH07FCY01IFR0IFCK01I
FCV0HFEI03HFEH07FCg0HFER0IFEK01IF8V03FCI03HFEH07F8g03F8R07IF8H0701IF8W0F
J03HFEH07F8gG0ES03JF87F01IF8gH07HFEH07F8gU01MF01IF80F8Y07HFEH07F8gV0MF01
IF9IFY07HFEH0HF8gV03LF03MFCX07HFEH0HF8gV01LF03MFE01F8T07HFEH0HF8gW07JFE0
3NF03FCT07HFEH0HF8gX0JF803NF07FCT07HFEH0HF8gY0HFEH03NF8HFCT07HFEH0HFhK03
NF8HFCT07HFEH0HFhK03NF8HFCT07HFC01HFhK03NF8HFCT0IFC01HFR0HFgQ03IFCJF8HFC
N01F8I0IFC01HFQ03HFCL03F8gG07IF0JF9HFCN07FEI0IFC01FEP01JFL0HFCgG0JF0JF9I
F8M0HFEI0IFC01FEP07JF8J01HFEg03JF07IF1JF8K01HFEI0IFC01FEO01KFEJ03HFEg07J
F03HFE1KFK03HFEI0IFC03FEO03KFEJ03HFEY01KF03HFE1KFEJ03HFEI0IFC03FC0F8L07L
FJ07HFEY03KFH0HF81LFCI03HFEI0IFC03FC1HFL0MF8I07HFEY0LFH03E01LFEI03HFEI0I
FC03FC3HF8J01IF80HFCI07HFEX01LFK03MFI03HFEI0IFC03FC7HFCJ03HFEH07FCI0IFCX
03LFK03MF8H03HFEI0IFC07FCIFEJ07HFCH03FCI0IFCX07LFK03MFCH03HFEI0IFC07F9FE
FEJ07HF8H01FEI0IFCX07LFK03FE3JFEH03HFEI0IFC07F9FC3FJ0IFI01FEH01IFCX07FEJ
FK07FE03JFH03HFEI0IFC07F9FC3FI01IFJ0HFH01IFCX03FCJFK07FEH07IFH03HFEI0IFC
0HF3F81F8H01IFJ0HFH01IFCX03F8JFK07FEI0IFH07HFEI0IFC0HF3F81F8H03HFEJ07FH0
3IFCX03E0IFEK07FCI0IFH07HFEI0IFC0HF3FC1F8H0IFEJ07F807IFCX03C0IFEK0HFCI0I
FH07HFCI0IFC0FE3FC1F803IFEJ07F807IFCX01H0IFEK0HFCH01IFH07HFCI0IFC1FE3FE1
FC0JFEJ03F80JFCgG0IFEK0HFCH01IFH07HFCI0IFC1FE3HFDFC7JFEJ03F81JFCgG0IFEK0
HF8H01IFH07HFCI0IFC1FC1QFJ03FC1JFCV08J0IFEJ01HF8H01HFEH07HFCI0IFC1FC1QFJ
03FC7JFCU018J0IFEJ01HFI01HFEH07HFCI0IFC3FC1QF8I01FCKF8U03CJ0IFEJ01HFI03H
FEH07HFCI0IFC3F80QF8I01FDFEIF8U07CJ0IFEJ01HFI03HFEH07HFCI0IFC3F807PFCI01
IFCIF8U0FCJ0IFEJ03FEI03HFEH07HFCI0IFC7F807QFI01IF8IF8T01FEI01IFCJ03FCI03
HFCH07HFCI0IFC7FH01QFCH01IF8IF8T03FEI01IFCJ03FCI03HFCH07HFCI0IFCHFI07JF3
LFH03IF0IF8T03FEI01IFCJ01F8I03HFCH07HFCI0IFCHFJ0IF83QFE0IF8T07FEI01IFCK0
6J07HFCH07HFCI0IFCFEJ01FC03QFC0IF8T0HFEI01IFCP07HFCH07HFCI0IFDFEJ01FC07Q
FH0IF8T0HFEI01IFCP07HF8H07HFCI07HFDFEJ01FC07HFEMFEH0IF8S01HFEI01IFCP07HF
8H07HF8I07HFDFCJ01FC07HFE3LFEH0IF8S03HFCI01IFCP07HF8H07HF8I07JFCJ01FC07H
FC1LFE01IF8S03HFCI01IFCP0IF8H0IF8I07JFCJ01FC07HFC07KFE01IF8S07HFCI03IF8P
0IFI0IF8I07JF8J01FC07HFC01IFDFE01IFT07HF8I03IF8P0IFI0IF8I07JF8J01FC07HFC
I0181FE01IFT0IF8I03IF8P0IFI0IF8I07JF8J03F80IFCK01FE01IFT0IFJ03IF8P0IFI0I
F8I07JFK03F80IFCK01FE01IFT0IFJ03IF8O01IFI0IF8I07JFK03F80IFCK01FE01IFS01H
FEJ03IF8O01HFEI0IF8I07IFEK03F80IFCK01FE01IFS01HFEJ03IF8O01HFEI0IF8I07IFE
K03F80IFCK01FE01IFS01HFEJ03IF8O01HFEI0IF8I03IFCK03F80IFCK01FE01IFS03HFCJ
03IFP01HFEI0IF8I03IFCK03F80IFCK01FE01IFS03HFCJ07IFP03HFEI0IF8I03IFCK03FH
0IFCK01FE01IFS03HFCJ07IFP03HFEI0IF8I03IF8K07FH0IFCK03FE01IFS03HFCJ07IFP0
3HFCI0IF8I03IF8K07FH0IFCK03FC01IFS07HF8J07IFP03HFCI0IF8I01IFL07FH0IFCK03
FC01IFS07HF8J07HFEP03HFCI0IF8I01IFL07FH0IFCK03FC01IFS07HF8J07HFEP07HFCI0
IF8I01IFL0HFH0IFCK03FC01IFS07HF8J07HFEP07HFCI0IF8I01IFL0FEH07HFCK03F801I
FS07HF8J0IFEP07HFCI0IF8I01IFL0FEH07HFEK07F801IFS07HF8J0IFCP07HF8I0IF8J0I
F8J01FEH07HFEK07F801IFS07HF8J0IFCP07HF8I0IF8J0IF8J01FCH07HFEK07F801IFS07
HF8J0IFCP07HF8I0IF8J0IF8J01FCH07HFEK0HFH01IFS07HF8J0IF8P07HF8I0IF8J0IFCJ
03FCH07HFEK0HFH01IFS07HF8I01IF8P07HF8H01IF8J0IFCJ03FCH03IFK0HFH01IFS07HF
8I01IF8P07HF8H01IF8J0IFCJ07F8H03IFK0FEH01IFS07HF8I01IFQ0IF8H03IF8I01IFEJ
07F8H03IFJ01FEH01IFS07HF8I03IFQ0IF8H03IF8I03IFEJ0HFI03IFJ01FCH01IFS03HF8
I03HFEQ0IF8H07IFCI07IFEJ0HFI01IF8I03FCH01IFS03HFCI03HFEQ0IF8H07IFCI07JFI
01FEI01IF8I03FCH01IFJ0CN03HFCI07HFEQ0IF8H0JFCI0KFI03FEJ0IFCI07F8H01IF8H0
1CN03HFCI07HFCQ0IF801JFEH01KF8H07FCJ0IFCI0HF8I0IF8H03EN01HFEI0IF8Q0IF801
JFEH03FEIFCH0HFCJ0IFEH01HFJ0IF8H07EN01IFI0IF8Q0IFC03F7IFH0HFCIFC01HF8J07
IFH03FEJ0IF8H0FEO0IFH01IFR0IFC0HF7IF81HF87HFE07HFK07IFC0HFEJ0IFC01FEO0IF
803HFER07HFE3FE3MF07MFK03MFCJ07HFE07FCO07HFC07HFER07KFC3LFE03LFEK01MF8J0
7LFCO03IFBIFCR07KFC3LFC03LFCK01MF8J03LF8O01MF8R03KF81LF801LF8L0MFK03KFEQ
0MFS03KFH0LFI0LFM07KFCK01KFCQ07KFES03JFEH0KFEI07JFEM03KF8K01KF8Q03KFCS01
JFCH07JF8I03JF8M01KFM0KFS0KFU0JFI03IFEJ01JFO0JFEM07IFCS07IFCU07HFCJ0IFCK
07HFCO03IF8M01IFU07HFV01FEK03FCL01FEQ0HFEO07F8nM0
~DGFAIXAN,06016,064,lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lL
F80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF8
0lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80l
LF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF
80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80
lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lL
F80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80lLF80
===========================================
---Ultima alteraçĂo: 16/10/14 - Herbert - Nova etiqueta MI genérica---
---07/04/16 - Unificado Resfriado e Congelado - Herbert---
---07/07/16 - Inserido "Kg" - Herbert ---
---09/01/18 - Ajustado tamanho da rastreabilidade--
---09/05/18 - Inserido TSPL
---05/10/23 - LAYOUT SEM TABELA NUTRICIONAL - RODRIGO LUCENA
===========================================

CLS
SET CUTTER BATCH
DIRECTION 1

TEXT 100,200,"0",0,22,22,"Separador de Lote"

TEXT 100,340,"0",0,20,24,"DATA: 17/05/2022"
TEXT 100,440,"0",0,20,24,"COD: 381224           QUANT:"
TEXT 100,540,"0",0,26,26,"DIANTEIRO SEM OSSO"


PRINT 2

^FXCODPRODUTO=''381224''^FS
^FXFAMILIA=''DIANTEIRO SEM OSSO''^FS
-------------------------------------------------


^XA
^PON
^PW910
^PR10,10,10,10
^LT-10
^LH,00
^PQ,1,0,Y


===TEMPLATE=====================================================

---BARRAS---
^FO030,270^GB350,000,3,B^FS
^FO030,332^GB400,000,3,B^FS
^FO030,390^GB710,000,3,B^FS
^FO030,420^GB505,000,3,B^FS
^FO030,511^GB505,000,3,B^FS
^FO030,600^GB500,000,3,B^FS

---BARRAS VERTICAIS---
^FO220,280^GB000,046,2,B^FS
^FO285,340^GB000,046,2,B^FS


---CBAR---
^FO100,170^BY1.6,,070^BEN,80,1,N^FD7899567270666^FS

--- CÓD.PRODUTO---
  ^FO540,365^FB200,1,0,R,0^A0N,30,30^FDC.P.381224^FS

---C.I.---
  ^FO540,350^FB200,1,0,R,0^A0N,16,16^FDC.I.2048^FS

---PESO EMBALAGEM---
 ^FO190,610^FB200,1,0,R,0^A0N,16,16^FDPeso da Embalagem: 0.000kg /^FS

---CLASSIFICAÇăO---
 ^FO030,625^FB200,1,0,L,0^A0N,18,18^FD(NA MEMBRANA)^FS

---OBS---
--SIMBOLOS--
^FO0710,030^XG^FS
--OUTROS--
^FO0710,030^XGNA

^FO0710,030^XG(NA MEMBRANA)

---LOGO LINHA---
^FO030,020^XGLG^FS

---LOGO MARCA ETIQUETA---
^FO030,020^XGLG20137^FS


---QRCODE---
^FO575,330^BQN,3,3^FD   http://www.confiancadesdeaorigem.com.br/Pesquisa2.aspx?parm=<PARM><SIF>9999</SIF><DATA_PROD>17/05/22</DATA_PROD><SKU>381224</SKU></PARM>^FS

---MSG---
^FO555,560^FB190,5,0,C,0^A0N,16,16^FH_^FD Leia esse QR Code utilizando seu Smartphone e saiba mais sobre a origem da carne que voce esta comprando.
^FS

---SELO SIF---
^FO0355,020^XGSELOMI^FS
   --NžSIF--
   ^FO0448,235^FB200,1,0,C,0^ARN,80,50^FD9999^FS


---DIPOA---
^FO0030,400^A0N,18,16^FH_^FDREGISTRO NO MINIST_90RIO DA AGRICULTURA SIF/DIPOA SOB N_a7 ^FS

---MSG_GLéTEN---
^FO0030,610^A0N,16,16^FH_^FDN_C7O CONT_90M GL_E9TEN /^FS


---MSG_RASTREABILIDADE---
^FO030,340^A0N,18,14^FH_^FDRASTREABILIDADE:^FS
^FO030,360^A0N,35,22^FH_^FD9999-16/05/22-0000000000^FS

---DATAS---
  --PRODUÇăO--
  ^FO030,280^FB170,1,0,C,0^FH_^A0N,22,18^FDData de Produ_87_c6o/LOTE^FS
  ^FO035,305^FB170,1,0,C,0^A0N,32,35^FD17/05/2022^FS

 --VALIDADE--
  ^FO230,280^FB170,1,0,C,0^FH_^A0N,22,20^FDValidade^FS
  ^FO230,305^FB170,1,0,C,0^A0N,32,35^FD16/07/2022^FS


--ENDEREÇO--
   ^FO030,520^FB510,4,0,L,0^A0N,18,18^FDPRODUZIDO POR: JBS S/A - Av. Marginal Direita do Tiete, 500 3ž Andar - Bloco I -VILA JAGUARA -SAO PAULO -SP -BRASIL -CEP05.118-100 -CNPJ 02.916.265/0001-60 - INDUSTRIA BRASILEIRA^FS


===RESFRIADO=====================================================

---PRODUTO---
^FO030,420^XGFAIXAN^FS

   --SIF--
  ^FO025,427^FB514,1,0,C,0^A0N,26,26^FR^FD CARNE RESFRIADA DE BOVINO SEM OSSO^FS
   --REDUZIDO--
   ^FO005,460^FB554,1,0,C,0^A0N,60,25^FR^FD DIANTEIRO^FS


---TEMPERATURA---
   ^FO300,340^FB140,1,0,C,0^A0N,18,14^FDMANTENHA RESFRIADO^FS
  ^FO290,360^FB180,1,0,C,0^FH_^A0N,32,26^FD0žC A 7žC^FS


===CONGELADO=====================================================

---PRODUTO---
   --SIF--
   ^FO025,427^FB514,1,0,C,0^A0N,26,26^ CARNE RESFRIADA DE BOVINO SEM OSSO^FS
   --REDUZIDO--
   ^FO025,460^FB524,1,0,C,0^A0N,60,28^ DIANTEIRO^FS


---TEMPERATURA---
  ^FO300,340^FB150,1,0,C,0^A0N,18,14^MANTENHA CONGELADO^FS
  ^FO290,362^FB180,1,0,C,0^FH_^A0N,32,26^FD0žC A 7žC^FS


---CONSERVAÇăO DOMÉSTICA---
^FO030,640^FB720,1,0,L,0^FH_^A0N,14,14^Conservacao Domestica/Val.-12_a7C Freezer=16/07/2022/Val.-8_a7C Congelador = 1 mes/Val. 2_a7C Refrigerador = 2 dias^FS


^XZ',	'2025-06-24 11:22:40.283929'),
(5,	'template modelo',	'TXT',	'^XA

^FX Top section with logo, name and address.
^CF0,60
^FO50,50^GB100,100,100^FS
^FO75,75^FR^GB100,100,100^FS
^FO93,93^GB40,40,40^FS
^FO220,50^FDIntershipping, Inc.^FS
^CF0,30
^FO220,115^{{SKU}}^FS
^FO220,155^FDShelbyville TN 38102^FS
^FO220,195^FDUnited States (USA)^FS
^FO50,250^GB700,3,3^FS

^FX Second section with recipient address and permit information.
^CFA,30
^FO50,300^FDJohn Doe^FS
^FO50,340^FD100 Main Street^FS
^FO50,380^FDSpringfield TN 39021^FS
^FO50,420^FDUnited States (USA)^FS
^CFA,15
^FO600,300^GB150,150,3^FS
^FO638,340^FDPermit^FS
^FO638,390^FD123456^FS
^FO50,500^GB700,3,3^FS

^FX Third section with bar code.
^BY5,2,270
^FO100,550^BC^FD12345678^FS

^FX Fourth section (the two boxes on the bottom).
^FO50,900^GB700,250,3^FS
^FO400,900^GB3,250,3^FS
^CF0,40
^FO100,960^FDCtr. X34B-1^FS
^FO100,1010^FDREF1 F00B47^FS
^FO100,1060^FDREF2 BL4H8^FS
^CF0,190
^FO470,955^FDCA^FS

^XZ',	'2025-06-22 17:22:40.283929');

DROP TABLE IF EXISTS "users";
DROP SEQUENCE IF EXISTS users_id_seq;
CREATE SEQUENCE users_id_seq INCREMENT 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1;

CREATE TABLE "public"."users" (
    "id" integer DEFAULT nextval('users_id_seq') NOT NULL,
    "username" character varying(255) NOT NULL,
    "password" character varying(255) NOT NULL,
    CONSTRAINT "users_pkey" PRIMARY KEY ("id")
)
WITH (oids = false);

INSERT INTO "users" ("id", "username", "password") VALUES
(1,	'admin',	'admin');

DROP TABLE IF EXISTS "dash_impressao_agg";
CREATE VIEW "dash_impressao_agg" AS SELECT ( SELECT count(*) AS count
           FROM template_zpl) AS total_templates,
    COALESCE(sum(quantidade), (0)::bigint) AS total_labels,
    count(*) AS total_jobs,
    COALESCE(sum(
        CASE
            WHEN (date(data_hora) = CURRENT_DATE) THEN quantidade
            ELSE 0
        END), (0)::bigint) AS total_dia,
    COALESCE(sum(
        CASE
            WHEN ((EXTRACT(year FROM data_hora) = EXTRACT(year FROM CURRENT_DATE)) AND (EXTRACT(month FROM data_hora) = EXTRACT(month FROM CURRENT_DATE))) THEN quantidade
            ELSE 0
        END), (0)::bigint) AS total_mes,
    COALESCE(sum(
        CASE
            WHEN (EXTRACT(year FROM data_hora) = EXTRACT(year FROM CURRENT_DATE)) THEN quantidade
            ELSE 0
        END), (0)::bigint) AS total_ano
   FROM historico_impressao;

-- 2025-06-24 15:29:24 UTC